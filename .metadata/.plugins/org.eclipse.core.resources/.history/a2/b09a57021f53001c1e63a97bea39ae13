package com.revature.service;

import java.security.InvalidParameterException;
import java.sql.SQLException;
import java.util.List;

import com.revature.dao.ReimbursementDAO;
import com.revature.exception.ReimbursementNotFoundException;
import com.revature.model.Reimbursement;
import com.revature.model.User;

public class ReimbursementService {

	private ReimbursementDAO reimbursementDao;
	
	public ReimbursementService() {
		this.reimbursementDao = new ReimbursementDAO();
	}
	
	public List<Reimbursement> getAllReimbursements(User currentLoggedIn) throws SQLException {
		List<Reimbursement> listOfReimbursements = null; 
		
		if(currentLoggedIn.getUserRole().equals("Finance Manager")) {
			listOfReimbursements = this.reimbursementDao.getAllReimbursements();
			
		}else if(currentLoggedIn.getUserRole().equals("Employee")) {
			listOfReimbursements = this.reimbursementDao.getReimbursementByEmployeeId(currentLoggedIn.getUserId());
			
			
		} return listOfReimbursements;
	}

	public void changeStatus(User currentLoggedIn, String reimbursementId, String status) {
		
		int reimb_id = Integer.parseInt(reimbursementId);
		try {
			Reimbursement rId = this.reimbursementDao.getReimbursementById(reimbursement_id);
			if (rId == null) {
				throw new ReimbursementNotFoundException("Reimbursement with an id of " + reimbursementId + " was not found");
			}
				}catch (NumberFormatException e) {
				throw new InvalidParameterException("Id provided is not an int convertable value");
			}
		
		Reimbursement reimbursement = this.reimbursementDao.getReimbursementById(reimbursementId);
		
	

	
	

	
			
}